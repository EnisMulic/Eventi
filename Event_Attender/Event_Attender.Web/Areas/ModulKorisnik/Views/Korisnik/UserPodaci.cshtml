
@{
    ViewData["Title"] = "UserPodaci";
}

@model Event_Attender.Web.Areas.ModulKorisnik.Models.KorisnikPodaciVM

<style>
    .labelDiv{
        width:20%;
        display:normal;
        margin-right:10%;
    }
    .form-inline label{
       justify-content:left;
    }    
   
    #slika{
        margin-right:10%;
    }
    #forma{
        width:60%;
    }
     form{
        width:100%;
        margin-right:0%;
     }
    #nadDiv{
        display:flex;
    }
    .btn-success{
        width:60%;
    }
  
</style>
<div id="nadDiv">
    <div id="slika">
        @if (Model.Slika != null)           
        {
            <img src="~/images/korisnicke/@Model.Slika" width="300" height="250"/>
        }
        else 
        {
            <img src="~/images/korisnicke/userIcon.png" width="300" height="250"  />
        }
    </div>

    <div id="forma">
        <form  asp-action="SnimiPodatke" method="post" enctype="multipart/form-data">
            <input type="hidden" asp-for="Id" value="@Model.Id" />
            <input type="hidden" asp-for="Slika" value="@Model.Slika" />

            <div class="form-inline">

                <label class="labelDiv">Ime: </label>
                <input asp-for="Ime" type="text" class="form-control" value="@Model.Ime" id="ime" />
                <span asp-validation-for="Ime" class="text-danger"></span>

            </div>
            <div class="form-inline">
                <label class="labelDiv" for="prezime">Prezime: </label>
                <input asp-for="Prezime" type="text" class="form-control" value="@Model.Prezime" id="prezime" />
                <span asp-validation-for="Prezime" class="text-danger"></span>
            </div>
            <div class="form-inline">
                <label class="labelDiv" for="telefon">Telefon: </label>
                <input asp-for="Telefon" type="text" class="form-control" id="telefon" value="@Model.Telefon" />
                <span asp-validation-for="Telefon" class="text-danger"></span>
            </div>
            <div class="form-inline">
                <label class="labelDiv" for="drzava">Država: </label>
                <select class="form-control" ajax-poziv="da" ajax-rezultat="ajaxUcitaj" ajax-url="/ModulKorisnik/Korisnik/UserPodaci?drzavaId=" name="drzavaId">
                    @foreach (var d in Model.drzave)
                    {
                        if (d.Value.Equals(Model.DrzavaId.ToString()))
                        {
                            <option value="@d.Value" selected>@d.Text</option>
                        }
                        else
                        {
                            <option value="@d.Value">@d.Text</option>
                        }
                    }
                </select>
            </div>

            <div class="form-inline">
                <label class="labelDiv" for="grad">Grad: </label>

                <select name="gradId" class="form-control">
                    @foreach (var g in Model.gradovi)
                    {
                        if (g.Id == Model.gradId)
                        {
                            <option value="@g.Id" selected>@g.Naziv</option>
                        }
                        else
                        {
                            <option value="@g.Id">@g.Naziv</option>
                        }
                    }
                </select>
            </div>
            <div class="form-inline">
                <label class="labelDiv" for="adresa">Adresa</label>
                <input asp-for="Adresa" type="text" class="form-control" value="@Model.Adresa" id="adresa" />
                <span asp-validation-for="Adresa" class="text-danger"></span>
            </div>
            <div class="form-inline">
                <label class="labelDiv" for="postanskiBroj">Poštanski broj</label>
                <input asp-for="PostanskiBroj" type="text" class="form-control" value="@Model.PostanskiBroj" id="postanskiBroj" />
                <span asp-validation-for="PostanskiBroj" class="text-danger"></span>
            </div>
            <div class="form-inline">
                <label class="labelDiv" for="email">Email</label>
                <input asp-for="Email" type="text" class="form-control" value="@Model.Email" id="email" />
                <span asp-validation-for="Email" class="text-danger"></span>
            </div>
            <div class="form-inline">
                <label class="labelDiv" for="brojKredKartice">Broj računa (kartice)</label>
                <input asp-for="BrojKreditneKartice" class="form-control" value="@Model.BrojKreditneKartice" id="brojKredKartice" />
                <span asp-validation-for="BrojKreditneKartice" class="text-danger"></span>
            </div>
            <div class="form-inline">
                <label class="labelDiv">Slika</label>
                <input type="file" name="slika" />
            </div>

            <input type="submit" value="Snimi" class="btn btn-success" />
        </form>
    </div>
</div>

@*U slucaju ajax poziva na change*@

@*<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="~/js/site.js" asp-append-version="true"></script>*@
@*<script src="~/js/KorisnikAjaxSkripta.js"></script>*@
@*<script>

    $("select[ajax-poziv='da']").change(function () {
        $(this).attr("ajax-poziv", "dodan");
        var urlPoziv = $(this).attr("ajax-url");
     
        var divRezultat = $(this).attr("ajax-rezultat");
        var drId = $(this).val();
        urlPoziv = urlPoziv + drId;

        $.get(urlPoziv, function (data, success) {
            $.get("#" + divRezultat).html(data);
        });
       
    })

</script>*@